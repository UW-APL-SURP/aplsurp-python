
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Compare CTD data in Puget Sound, cruise vs buoy &#8212; APL SURP Python Course</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/ctd-cruise-vs-ptwellsbuoy';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/surp_logo_115x168.png" class="logo__image only-light" alt="APL SURP Python Course - Home"/>
    <script>document.write(`<img src="../_static/surp_logo_115x168.png" class="logo__image only-dark" alt="APL SURP Python Course - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    APL SURP Python Course
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../python.html">Why Python?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Quick Python overview</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Main lessons</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../lessons/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lessons/Python%20lesson%20%28Day%202%29%20-%20blank%20copy.html">Day 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lessons/Python%20lesson%20%28Day%203%29%20-%20blank%20copy.html">Day 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lessons/Python%20lesson%20%28Day%204%29%20-%20blank%20copy.html">Day 3</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Other resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../install-run.html">Running Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../complementary_lessons.html">Complementary lessons</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheatsheets.html">Python cheat sheets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advancedexamples.html">Advanced examples</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/UW-APL-SURP/aplsurp-python" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/UW-APL-SURP/aplsurp-python/edit/main/site/notebooks/ctd-cruise-vs-ptwellsbuoy.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/UW-APL-SURP/aplsurp-python/issues/new?title=Issue%20on%20page%20%2Fnotebooks/ctd-cruise-vs-ptwellsbuoy.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/ctd-cruise-vs-ptwellsbuoy.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Compare CTD data in Puget Sound, cruise vs buoy</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-from-dino-sip-cruise">Data from DINO SIP Cruise</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#read-and-examine-the-cnv-export-file">Read and examine the <code class="docutils literal notranslate"><span class="pre">.cnv</span></code> export file</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pre-process-temperature-and-conductivity">Pre-process temperature and conductivity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-some-standard-derived-variables">Calculate some standard derived variables</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-from-the-orca-point-wells-depth-profiling-buoy-mooring">Data from the ORCA Point Wells depth-profiling buoy (mooring)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compare-buoy-and-cruise-data">Compare buoy and cruise data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#map-the-locations">Map the locations</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="compare-ctd-data-in-puget-sound-cruise-vs-buoy">
<h1>Compare CTD data in Puget Sound, cruise vs buoy<a class="headerlink" href="#compare-ctd-data-in-puget-sound-cruise-vs-buoy" title="Link to this heading">#</a></h1>
<p>8/16,12, 7/18/2024</p>
<p>Emilio Mayorga</p>
<p><strong>TODO:</strong></p>
<ul class="simple">
<li><p>~~Add data files to a <code class="docutils literal notranslate"><span class="pre">data</span></code> subfolder~~</p></li>
<li><p>Change plot order: CTD first, then ORCA</p></li>
<li><p>Is the dinosip conda env the old one from last year? If so, create a fresh one with Py3.12, then retest everything, including the website</p></li>
<li><p>Use relative paths for file paths to data files</p></li>
<li><p>Make sure to say this notebook builds on the intro notebook on the ctd package. Add link, <a class="reference external" href="https://pyoceans.github.io/python-ctd/quick_intro-output.html">https://pyoceans.github.io/python-ctd/quick_intro-output.html</a></p></li>
<li><p>Add reading and mapping (and plotting?) of all other cruise casts. Upload to the github repo the zip file containing all the cnv files? The files are 8.8 MB zipped and 20.7 MB decompressed</p></li>
<li><p>Add intro text describing the goals of this notebook</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">timedelta</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<section id="data-from-dino-sip-cruise">
<h2>Data from DINO SIP Cruise<a class="headerlink" href="#data-from-dino-sip-cruise" title="Link to this heading">#</a></h2>
<p>We’ll use the Python <a class="reference external" href="https://pyoceans.github.io/python-ctd/"><code class="docutils literal notranslate"><span class="pre">ctd</span></code> package</a> to read the <code class="docutils literal notranslate"><span class="pre">.cnv</span></code> file for one cast, exported by <a class="reference external" href="https://www.seabird.com/">SeaBird</a> software. This file includes data from all sensors (CTD and other sensors) as well as metadata about the cruise and the cast, such as location (latitude, longitude and station name), time, sensor names and calibration, etc.</p>
<section id="read-and-examine-the-cnv-export-file">
<h3>Read and examine the <code class="docutils literal notranslate"><span class="pre">.cnv</span></code> export file<a class="headerlink" href="#read-and-examine-the-cnv-export-file" title="Link to this heading">#</a></h3>
<p>We’ll use the file <a class="reference download internal" download="" href="../_downloads/0b47bbfcf16d3d933fac7d8c5604e19c/20240718_CTD05_p28.cnv"><span class="xref download myst">data/cruises/20240718_CTD05_p28.cnv</span></a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">ctd</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cast</span> <span class="o">=</span> <span class="n">ctd</span><span class="o">.</span><span class="n">from_cnv</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s2">&quot;./data/cruises&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;20240718_CTD05_p28.cnv&quot;</span><span class="p">)</span>

<span class="c1"># Separate the data into down cast and up cast</span>
<span class="n">down_cast_df</span><span class="p">,</span> <span class="n">up_cast_df</span> <span class="o">=</span> <span class="n">cast</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">cast</span></code> is a custom object created by the <code class="docutils literal notranslate"><span class="pre">ctd</span></code> package that holds the CTD cast data and metadata. The <code class="docutils literal notranslate"><span class="pre">ctd</span></code> package contains custom functionality for data pre-processing and plotting ocean vertical profiles.</p>
<p><strong>In this notebook we’ll focus on the <code class="docutils literal notranslate"><span class="pre">down_cast_df</span></code> data only.</strong> This is a <a class="reference external" href="https://pandas.pydata.org">Pandas</a> DataFrame. The index and columns in this DataFrame show the variables that are read: pressure, temperature, salinity, conductivity, beam transmission, fluorescence, pH, photosynthetically active radiation, and a data quality flag.</p>
<p>Let’s look at the first 5 rows, to get a feel for the data:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">down_cast_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>t090C</th>
      <th>sal00</th>
      <th>c0S/m</th>
      <th>sbox0Mm/Kg</th>
      <th>CStarTr0</th>
      <th>flECO-AFL</th>
      <th>ph</th>
      <th>par</th>
      <th>flag</th>
    </tr>
    <tr>
      <th>Pressure [dbar]</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>6.543</th>
      <td>14.0140</td>
      <td>30.7695</td>
      <td>3.737626</td>
      <td>225.061</td>
      <td>68.6557</td>
      <td>6.8175</td>
      <td>8.034</td>
      <td>137.86</td>
      <td>False</td>
    </tr>
    <tr>
      <th>6.558</th>
      <td>14.0138</td>
      <td>30.7709</td>
      <td>3.737760</td>
      <td>224.907</td>
      <td>68.9782</td>
      <td>6.8175</td>
      <td>8.029</td>
      <td>137.86</td>
      <td>False</td>
    </tr>
    <tr>
      <th>6.543</th>
      <td>14.0135</td>
      <td>30.7719</td>
      <td>3.737836</td>
      <td>224.743</td>
      <td>69.0319</td>
      <td>6.8175</td>
      <td>8.034</td>
      <td>138.65</td>
      <td>False</td>
    </tr>
    <tr>
      <th>6.558</th>
      <td>14.0134</td>
      <td>30.7718</td>
      <td>3.737811</td>
      <td>224.720</td>
      <td>69.0050</td>
      <td>6.8175</td>
      <td>8.034</td>
      <td>139.04</td>
      <td>False</td>
    </tr>
    <tr>
      <th>6.543</th>
      <td>14.0128</td>
      <td>30.7725</td>
      <td>3.737842</td>
      <td>224.852</td>
      <td>68.9782</td>
      <td>6.8175</td>
      <td>8.029</td>
      <td>139.04</td>
      <td>False</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>File metadata is stored in a dictionary for convenient access. Let’s look at some of that metadata.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">metadata</span> <span class="o">=</span> <span class="n">cast</span><span class="o">.</span><span class="n">_metadata</span>

<span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dict_keys([&#39;name&#39;, &#39;header&#39;, &#39;config&#39;, &#39;names&#39;, &#39;skiprows&#39;, &#39;time&#39;, &#39;lon&#39;, &#39;lat&#39;])
</pre></div>
</div>
</div>
</div>
<p>We’ll store cast time, latitude and longitude in variables for reuse later in the notebook</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dcast_time</span><span class="p">,</span> <span class="n">dcast_lat</span><span class="p">,</span> <span class="n">dcast_lon</span> <span class="o">=</span> <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span>
<span class="n">dcast_time</span><span class="p">,</span> <span class="n">dcast_lat</span><span class="p">,</span> <span class="n">dcast_lon</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(datetime.datetime(2024, 7, 18, 15, 54),
 47.71333333333333,
 -122.41933333333333)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;config&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span># nquan = 10
# nvalues = 26928
# units = specified
# name 0 = depSM: Depth [salt water, m]
# name 1 = t090C: Temperature [ITS-90, deg C]
# name 2 = sal00: Salinity, Practical [PSU]
# name 3 = c0S/m: Conductivity [S/m]
# name 4 = sbox0Mm/Kg: Oxygen, SBE 43 [umol/kg]
# name 5 = CStarTr0: Beam Transmission, WET Labs C-Star [%]
# name 6 = flECO-AFL: Fluorescence, WET Labs ECO-AFL/FL [mg/m^3]
# name 7 = ph: pH
# name 8 = par: PAR/Irradiance, Biospherical/Licor
# name 9 = flag:  0.000e+00
# span 0 =      0.619,    180.351
# span 1 =    11.1966,    16.1026
# span 2 =    29.2562,    30.7725
# span 3 =   3.442453,   3.755137
# span 4 =    186.942,    411.365
# span 5 =    61.9648,    93.5652
# span 6 =     0.0776,     8.7223
# span 7 =      7.539,      8.284
# span 8 = 1.0000e-12, 4.0607e+03
# span 9 = 0.0000e+00, 0.0000e+00
# interval = seconds: 0.0416667
# start_time = Jul 18 2024 15:54:00 [NMEA time, header]
# bad_flag = -9.990e-29
# &lt;Sensors count=&quot;11&quot; &gt;
#   &lt;sensor Channel=&quot;1&quot; &gt;
#     &lt;!-- Frequency 0, Temperature --&gt;
#     &lt;TemperatureSensor SensorID=&quot;55&quot; &gt;
#       &lt;SerialNumber&gt;1121&lt;/SerialNumber&gt;
#       &lt;CalibrationDate&gt;09-Feb-24&lt;/CalibrationDate&gt;
#       &lt;UseG_J&gt;1&lt;/UseG_J&gt;
#       &lt;A&gt;0.00000000e+000&lt;/A&gt;
#       &lt;B&gt;0.00000000e+000&lt;/B&gt;
#       &lt;C&gt;0.00000000e+000&lt;/C&gt;
#       &lt;D&gt;0.00000000e+000&lt;/D&gt;
#       &lt;F0_Old&gt;0.000&lt;/F0_Old&gt;
#       &lt;G&gt;4.80019878e-003&lt;/G&gt;
#       &lt;H&gt;6.69292066e-004&lt;/H&gt;
#       &lt;I&gt;2.48135251e-005&lt;/I&gt;
#       &lt;J&gt;1.91962678e-006&lt;/J&gt;
#       &lt;F0&gt;1000.000&lt;/F0&gt;
#       &lt;Slope&gt;1.00000000&lt;/Slope&gt;
#       &lt;Offset&gt;0.0000&lt;/Offset&gt;
#     &lt;/TemperatureSensor&gt;
#   &lt;/sensor&gt;
#   &lt;sensor Channel=&quot;2&quot; &gt;
#     &lt;!-- Frequency 1, Conductivity --&gt;
#     &lt;ConductivitySensor SensorID=&quot;3&quot; &gt;
#       &lt;SerialNumber&gt;2881&lt;/SerialNumber&gt;
#       &lt;CalibrationDate&gt;28-Feb-24&lt;/CalibrationDate&gt;
#       &lt;UseG_J&gt;1&lt;/UseG_J&gt;
#       &lt;!-- Cell const and series R are applicable only for wide range sensors. --&gt;
#       &lt;SeriesR&gt;0.0000&lt;/SeriesR&gt;
#       &lt;CellConst&gt;2000.0000&lt;/CellConst&gt;
#       &lt;ConductivityType&gt;0&lt;/ConductivityType&gt;
#       &lt;Coefficients equation=&quot;0&quot; &gt;
#         &lt;A&gt;0.00000000e+000&lt;/A&gt;
#         &lt;B&gt;0.00000000e+000&lt;/B&gt;
#         &lt;C&gt;0.00000000e+000&lt;/C&gt;
#         &lt;D&gt;0.00000000e+000&lt;/D&gt;
#         &lt;M&gt;0.0&lt;/M&gt;
#         &lt;CPcor&gt;-9.57000000e-008&lt;/CPcor&gt;
#       &lt;/Coefficients&gt;
#       &lt;Coefficients equation=&quot;1&quot; &gt;
#         &lt;G&gt;-1.01388164e+001&lt;/G&gt;
#         &lt;H&gt;1.39630559e+000&lt;/H&gt;
#         &lt;I&gt;-7.42875999e-004&lt;/I&gt;
#         &lt;J&gt;1.21597149e-004&lt;/J&gt;
#         &lt;CPcor&gt;-9.57000000e-008&lt;/CPcor&gt;
#         &lt;CTcor&gt;3.2500e-006&lt;/CTcor&gt;
#         &lt;!-- WBOTC not applicable unless ConductivityType = 1. --&gt;
#         &lt;WBOTC&gt;0.00000000e+000&lt;/WBOTC&gt;
#       &lt;/Coefficients&gt;
#       &lt;Slope&gt;1.00000000&lt;/Slope&gt;
#       &lt;Offset&gt;0.00000&lt;/Offset&gt;
#     &lt;/ConductivitySensor&gt;
#   &lt;/sensor&gt;
#   &lt;sensor Channel=&quot;3&quot; &gt;
#     &lt;!-- Frequency 2, Pressure, Digiquartz with TC --&gt;
#     &lt;PressureSensor SensorID=&quot;45&quot; &gt;
#       &lt;SerialNumber&gt;0216&lt;/SerialNumber&gt;
#       &lt;CalibrationDate&gt;11-Jan-24&lt;/CalibrationDate&gt;
#       &lt;C1&gt;-4.562074e+004&lt;/C1&gt;
#       &lt;C2&gt;1.820199e-001&lt;/C2&gt;
#       &lt;C3&gt;1.580430e-002&lt;/C3&gt;
#       &lt;D1&gt;3.615300e-002&lt;/D1&gt;
#       &lt;D2&gt;0.000000e+000&lt;/D2&gt;
#       &lt;T1&gt;3.024088e+001&lt;/T1&gt;
#       &lt;T2&gt;-3.472576e-004&lt;/T2&gt;
#       &lt;T3&gt;4.427560e-006&lt;/T3&gt;
#       &lt;T4&gt;3.763240e-009&lt;/T4&gt;
#       &lt;Slope&gt;0.99989457&lt;/Slope&gt;
#       &lt;Offset&gt;-4.96465&lt;/Offset&gt;
#       &lt;T5&gt;0.000000e+000&lt;/T5&gt;
#       &lt;AD590M&gt;1.176000e-002&lt;/AD590M&gt;
#       &lt;AD590B&gt;-8.544400e+000&lt;/AD590B&gt;
#     &lt;/PressureSensor&gt;
#   &lt;/sensor&gt;
#   &lt;sensor Channel=&quot;4&quot; &gt;
#     &lt;!-- A/D voltage 0, Oxygen, SBE 43 --&gt;
#     &lt;OxygenSensor SensorID=&quot;38&quot; &gt;
#       &lt;SerialNumber&gt;0023&lt;/SerialNumber&gt;
#       &lt;CalibrationDate&gt;01-Mar-24&lt;/CalibrationDate&gt;
#       &lt;Use2007Equation&gt;1&lt;/Use2007Equation&gt;
#       &lt;CalibrationCoefficients equation=&quot;0&quot; &gt;
#         &lt;!-- Coefficients for Owens-Millard equation. --&gt;
#         &lt;Boc&gt;0.0000&lt;/Boc&gt;
#         &lt;Soc&gt;0.0000e+000&lt;/Soc&gt;
#         &lt;offset&gt;0.0000&lt;/offset&gt;
#         &lt;Pcor&gt;0.00e+000&lt;/Pcor&gt;
#         &lt;Tcor&gt;0.0000&lt;/Tcor&gt;
#         &lt;Tau&gt;0.0&lt;/Tau&gt;
#       &lt;/CalibrationCoefficients&gt;
#       &lt;CalibrationCoefficients equation=&quot;1&quot; &gt;
#         &lt;!-- Coefficients for Sea-Bird equation - SBE calibration in 2007 and later. --&gt;
#         &lt;Soc&gt;4.4983e-001&lt;/Soc&gt;
#         &lt;offset&gt;-0.4965&lt;/offset&gt;
#         &lt;A&gt;-3.3116e-003&lt;/A&gt;
#         &lt;B&gt; 1.6506e-004&lt;/B&gt;
#         &lt;C&gt;-2.3831e-006&lt;/C&gt;
#         &lt;D0&gt; 2.5826e+000&lt;/D0&gt;
#         &lt;D1&gt; 1.92634e-004&lt;/D1&gt;
#         &lt;D2&gt;-4.64803e-002&lt;/D2&gt;
#         &lt;E&gt; 3.6000e-002&lt;/E&gt;
#         &lt;Tau20&gt; 1.1400&lt;/Tau20&gt;
#         &lt;H1&gt;-3.3000e-002&lt;/H1&gt;
#         &lt;H2&gt; 5.0000e+003&lt;/H2&gt;
#         &lt;H3&gt; 1.4500e+003&lt;/H3&gt;
#       &lt;/CalibrationCoefficients&gt;
#     &lt;/OxygenSensor&gt;
#   &lt;/sensor&gt;
#   &lt;sensor Channel=&quot;5&quot; &gt;
#     &lt;!-- A/D voltage 1, pH --&gt;
#     &lt;pH_Sensor SensorID=&quot;43&quot; &gt;
#       &lt;SerialNumber&gt;0929&lt;/SerialNumber&gt;
#       &lt;CalibrationDate&gt;7/8/2024&lt;/CalibrationDate&gt;
#       &lt;Slope&gt;4.5430&lt;/Slope&gt;
#       &lt;Offset&gt;2.8338&lt;/Offset&gt;
#     &lt;/pH_Sensor&gt;
#   &lt;/sensor&gt;
#   &lt;sensor Channel=&quot;6&quot; &gt;
#     &lt;!-- A/D voltage 2, Fluorometer, WET Labs ECO-AFL/FL --&gt;
#     &lt;FluoroWetlabECO_AFL_FL_Sensor SensorID=&quot;20&quot; &gt;
#       &lt;SerialNumber&gt;FLRTD-8543&lt;/SerialNumber&gt;
#       &lt;CalibrationDate&gt;2023-10-06&lt;/CalibrationDate&gt;
#       &lt;ScaleFactor&gt;6.00000000e+000&lt;/ScaleFactor&gt;
#       &lt;!-- Dark output --&gt;
#       &lt;Vblank&gt;0.0530&lt;/Vblank&gt;
#     &lt;/FluoroWetlabECO_AFL_FL_Sensor&gt;
#   &lt;/sensor&gt;
#   &lt;sensor Channel=&quot;7&quot; &gt;
#     &lt;!-- A/D voltage 3, Transmissometer, WET Labs C-Star --&gt;
#     &lt;WET_LabsCStar SensorID=&quot;71&quot; &gt;
#       &lt;SerialNumber&gt;CST-2148&lt;/SerialNumber&gt;
#       &lt;CalibrationDate&gt;2024-04-05&lt;/CalibrationDate&gt;
#       &lt;M&gt;22.0074&lt;/M&gt;
#       &lt;B&gt;-0.1342&lt;/B&gt;
#       &lt;PathLength&gt;0.250&lt;/PathLength&gt;
#     &lt;/WET_LabsCStar&gt;
#   &lt;/sensor&gt;
#   &lt;sensor Channel=&quot;8&quot; &gt;
#     &lt;!-- A/D voltage 4, Altimeter --&gt;
#     &lt;AltimeterSensor SensorID=&quot;0&quot; &gt;
#       &lt;SerialNumber&gt;1098&lt;/SerialNumber&gt;
#       &lt;CalibrationDate&gt;&lt;/CalibrationDate&gt;
#       &lt;ScaleFactor&gt;15.000&lt;/ScaleFactor&gt;
#       &lt;Offset&gt;0.000&lt;/Offset&gt;
#     &lt;/AltimeterSensor&gt;
#   &lt;/sensor&gt;
#   &lt;sensor Channel=&quot;9&quot; &gt;
#     &lt;!-- A/D voltage 5, Free --&gt;
#   &lt;/sensor&gt;
#   &lt;sensor Channel=&quot;10&quot; &gt;
#     &lt;!-- A/D voltage 6, PAR/Irradiance, Biospherical/Licor --&gt;
#     &lt;PAR_BiosphericalLicorChelseaSensor SensorID=&quot;42&quot; &gt;
#       &lt;SerialNumber&gt;QSP-2350-70840&lt;/SerialNumber&gt;
#       &lt;CalibrationDate&gt;2023-12-18&lt;/CalibrationDate&gt;
#       &lt;M&gt;1.00000000&lt;/M&gt;
#       &lt;B&gt;0.00000000&lt;/B&gt;
#       &lt;CalibrationConstant&gt;11111111111.11100000&lt;/CalibrationConstant&gt;
#       &lt;Multiplier&gt;1.00000000&lt;/Multiplier&gt;
#       &lt;Offset&gt;-0.90110500&lt;/Offset&gt;
#     &lt;/PAR_BiosphericalLicorChelseaSensor&gt;
#   &lt;/sensor&gt;
#   &lt;sensor Channel=&quot;11&quot; &gt;
#     &lt;!-- A/D voltage 7, Free --&gt;
#   &lt;/sensor&gt;
# &lt;/Sensors&gt;
# datcnv_date = Jul 19 2024 14:30:42, 7.26.7.129 [datcnv_vars = 9]
# datcnv_in = C:\Data\RC0122ctd\20240718_CTD05_p28.hex C:\Data\RC0122ctd\20240716_CTD02_P29.XMLCON
# datcnv_skipover = 0
# datcnv_ox_hysteresis_correction = yes
# datcnv_ox_tau_correction = yes
# file_type = ascii
</pre></div>
</div>
</div>
</div>
<p>Use the <code class="docutils literal notranslate"><span class="pre">ctd</span></code> <code class="docutils literal notranslate"><span class="pre">plot_cast</span></code> function to plot depth profiles of raw temperature and conductivity on different axes. Note that the data is a bit “noisy”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax0</span> <span class="o">=</span> <span class="n">down_cast_df</span><span class="p">[</span><span class="s2">&quot;t090C&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot_cast</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Temperature (°C)&quot;</span><span class="p">)</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">down_cast_df</span><span class="p">[</span><span class="s2">&quot;c0S/m&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot_cast</span><span class="p">(</span>
    <span class="n">ax</span><span class="o">=</span><span class="n">ax0</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Conductivity (S/m)&quot;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s2">&quot;orange&quot;</span><span class="p">,</span>
    <span class="n">secondary_y</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">ax0</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;lower left&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;lower right&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/615381b6ca64553fe6d19fb551b1472a2f5cb2bcbfd4b15687d632cc5ab8e9be.png" src="../_images/615381b6ca64553fe6d19fb551b1472a2f5cb2bcbfd4b15687d632cc5ab8e9be.png" />
</div>
</div>
<p>Let’s see some of the other variables, though we won’t look at them again. The level of customization involved in this plot is more than what <code class="docutils literal notranslate"><span class="pre">plot_cast</span></code> can handle, so we’ll have to do a lot of manual setup with <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># subplots returns two &quot;axes&quot;, one for each sub plot</span>
<span class="n">_</span><span class="p">,</span> <span class="p">[</span><span class="n">ax0</span><span class="p">,</span> <span class="n">ax1</span><span class="p">]</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="c1"># Left subplot</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">invert_yaxis</span><span class="p">()</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">down_cast_df</span><span class="p">[</span><span class="s2">&quot;flECO-AFL&quot;</span><span class="p">],</span> <span class="n">down_cast_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Fluorescence&quot;</span><span class="p">)</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Fluorescence ($mg/m^3$)&quot;</span><span class="p">)</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Pressure (dbar)&quot;</span><span class="p">)</span>
<span class="n">ax0_top</span> <span class="o">=</span> <span class="n">ax0</span><span class="o">.</span><span class="n">twiny</span><span class="p">()</span>
<span class="n">ax0_top</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">down_cast_df</span><span class="p">[</span><span class="s2">&quot;par&quot;</span><span class="p">],</span> <span class="n">down_cast_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;PAR&quot;</span><span class="p">)</span>
<span class="n">ax0_top</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Photosynthetically Active Radiation&quot;</span><span class="p">)</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;lower right&quot;</span><span class="p">)</span>
<span class="n">ax0_top</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;lower left&quot;</span><span class="p">)</span>

<span class="c1"># Right subplot</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">invert_yaxis</span><span class="p">()</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">down_cast_df</span><span class="p">[</span><span class="s2">&quot;ph&quot;</span><span class="p">],</span> <span class="n">down_cast_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;pH&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;pH&quot;</span><span class="p">)</span>
<span class="n">ax1_top</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twiny</span><span class="p">()</span>
<span class="n">ax1_top</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">down_cast_df</span><span class="p">[</span><span class="s2">&quot;sbox0Mm/Kg&quot;</span><span class="p">],</span> <span class="n">down_cast_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Oxygen&quot;</span><span class="p">)</span>
<span class="n">ax1_top</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Oxygen Concentration ($\mu mol / kg$)&quot;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;lower right&quot;</span><span class="p">)</span>
<span class="n">ax1_top</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;lower left&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/49ff4cdd3b97983014176b3f4a2bfc1fb34e29d8ee37d564636c2bb5718c94df.png" src="../_images/49ff4cdd3b97983014176b3f4a2bfc1fb34e29d8ee37d564636c2bb5718c94df.png" />
</div>
</div>
</section>
<section id="pre-process-temperature-and-conductivity">
<h3>Pre-process temperature and conductivity<a class="headerlink" href="#pre-process-temperature-and-conductivity" title="Link to this heading">#</a></h3>
<p>Let’s use functions provided by the <code class="docutils literal notranslate"><span class="pre">ctd</span></code> package to perform data cleaning and pre-processing steps that are typically applied to such data. Note how the functions are “chained” to apply in a sequence, one after the other. We’ll retain only temperature, conductivity and pressure (in the DataFrame index).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">down_cast_df</span> <span class="o">=</span> <span class="n">down_cast_df</span><span class="p">[[</span><span class="s2">&quot;t090C&quot;</span><span class="p">,</span> <span class="s2">&quot;c0S/m&quot;</span><span class="p">]]</span>

<span class="n">proc</span> <span class="o">=</span> <span class="p">(</span>
    <span class="c1"># Remove all data above the water line</span>
    <span class="n">down_cast_df</span><span class="o">.</span><span class="n">remove_above_water</span><span class="p">()</span>
    <span class="c1"># Remove all the data above a certain index value where index can be pressure or depth (it can be unreliable)</span>
    <span class="o">.</span><span class="n">remove_up_to</span><span class="p">(</span><span class="n">idx</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
    <span class="c1"># Remove data spikes</span>
    <span class="o">.</span><span class="n">despike</span><span class="p">(</span><span class="n">n1</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">n2</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="c1"># Apply &quot;low-pass&quot; filter, to remove high-frequency wiggles</span>
    <span class="o">.</span><span class="n">lp_filter</span><span class="p">()</span>
    <span class="c1"># Remove pressure reversals from the index</span>
    <span class="o">.</span><span class="n">press_check</span><span class="p">()</span>
    <span class="c1"># Interpolate gaps (this is a Pandas function)</span>
    <span class="o">.</span><span class="n">interpolate</span><span class="p">()</span>
    <span class="c1"># Bin average the index (usually pressure) to a given interval</span>
    <span class="o">.</span><span class="n">bindata</span><span class="p">(</span><span class="n">delta</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s2">&quot;interpolate&quot;</span><span class="p">)</span>
    <span class="c1"># Smooth the data using a window with the requested size</span>
    <span class="o">.</span><span class="n">smooth</span><span class="p">(</span><span class="n">window_len</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="s2">&quot;hanning&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">proc</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>t090C</th>
      <th>c0S/m</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8.0</th>
      <td>13.784330</td>
      <td>3.600170</td>
    </tr>
    <tr>
      <th>9.0</th>
      <td>13.606445</td>
      <td>3.587466</td>
    </tr>
    <tr>
      <th>10.0</th>
      <td>13.431428</td>
      <td>3.574971</td>
    </tr>
    <tr>
      <th>11.0</th>
      <td>13.264619</td>
      <td>3.563063</td>
    </tr>
    <tr>
      <th>12.0</th>
      <td>13.110621</td>
      <td>3.552074</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Now let’s compare the raw vs post-processed temperature:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">down_cast_df</span><span class="p">[</span><span class="s2">&quot;t090C&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot_cast</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Raw&quot;</span><span class="p">)</span>
<span class="n">proc</span><span class="p">[</span><span class="s2">&quot;t090C&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot_cast</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Processed&quot;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;lower right&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Temperature (°C)&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/08b47ce15e871582e0c5e7a554ee2f85f8bc7c3b5a3cd5fcdf40295f17efa674.png" src="../_images/08b47ce15e871582e0c5e7a554ee2f85f8bc7c3b5a3cd5fcdf40295f17efa674.png" />
</div>
</div>
</section>
<section id="calculate-some-standard-derived-variables">
<h3>Calculate some standard derived variables<a class="headerlink" href="#calculate-some-standard-derived-variables" title="Link to this heading">#</a></h3>
<p>We can now compute a set of standard oceanographic (“hydrographic”) variables using published “thermodynamic equations of seawater”, also known as equations of state. These variables are more rigorous versions of the preceding variables. We’ll use the “TEOS-10” equations implemented in the <a class="reference external" href="https://teos-10.github.io/GSW-Python/index.html">GSW-Python package</a> (<code class="docutils literal notranslate"><span class="pre">gsw</span></code>).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">gsw</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Pressure values are found in the Dataframe index</span>
<span class="n">press</span> <span class="o">=</span> <span class="n">proc</span><span class="o">.</span><span class="n">index</span>

<span class="c1"># SP: Practical Salinity (unitless, but often referred to as PSU)</span>
<span class="c1"># SA: Absolute Salinity (g/kg)</span>
<span class="c1"># CT: Conservative temperature of seawater from in-situ temperature (degrees Celsius)</span>
<span class="c1"># sigma0_CT: Potential density anomaly with respect to a reference pressure of 0 dbar (potential density - 1000 kg/m^3)</span>
<span class="c1"># depth: Depth below the water surface (m)</span>

<span class="n">SP</span> <span class="o">=</span> <span class="n">gsw</span><span class="o">.</span><span class="n">SP_from_C</span><span class="p">(</span><span class="n">proc</span><span class="p">[</span><span class="s2">&quot;c0S/m&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">()</span> <span class="o">*</span> <span class="mf">10.0</span><span class="p">,</span> <span class="n">proc</span><span class="p">[</span><span class="s2">&quot;t090C&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="n">press</span><span class="p">)</span>
<span class="n">SA</span> <span class="o">=</span> <span class="n">gsw</span><span class="o">.</span><span class="n">SA_from_SP</span><span class="p">(</span><span class="n">SP</span><span class="p">,</span> <span class="n">press</span><span class="p">,</span> <span class="n">dcast_lon</span><span class="p">,</span> <span class="n">dcast_lat</span><span class="p">)</span>
<span class="n">CT</span> <span class="o">=</span> <span class="n">gsw</span><span class="o">.</span><span class="n">CT_from_t</span><span class="p">(</span><span class="n">SA</span><span class="p">,</span> <span class="n">proc</span><span class="p">[</span><span class="s2">&quot;t090C&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">to_numpy</span><span class="p">(),</span> <span class="n">press</span><span class="p">)</span>
<span class="n">sigma0_CT</span> <span class="o">=</span> <span class="n">gsw</span><span class="o">.</span><span class="n">sigma0</span><span class="p">(</span><span class="n">SA</span><span class="p">,</span> <span class="n">CT</span><span class="p">)</span>
<span class="n">depth</span> <span class="o">=</span> <span class="o">-</span><span class="n">gsw</span><span class="o">.</span><span class="n">z_from_p</span><span class="p">(</span><span class="n">press</span><span class="p">,</span> <span class="n">dcast_lat</span><span class="p">)</span>

<span class="n">proc</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">proc</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">SP</span><span class="o">=</span><span class="n">SP</span><span class="p">)</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">SA</span><span class="o">=</span><span class="n">SA</span><span class="p">)</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">CT</span><span class="o">=</span><span class="n">CT</span><span class="p">)</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">sigma0_CT</span><span class="o">=</span><span class="n">sigma0_CT</span><span class="p">)</span>
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">depth</span><span class="o">=</span><span class="n">depth</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">proc</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>t090C</th>
      <th>c0S/m</th>
      <th>SP</th>
      <th>SA</th>
      <th>CT</th>
      <th>sigma0_CT</th>
      <th>depth</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>8.0</th>
      <td>13.784330</td>
      <td>3.600170</td>
      <td>29.691206</td>
      <td>29.834354</td>
      <td>13.895472</td>
      <td>22.138643</td>
      <td>7.932935</td>
    </tr>
    <tr>
      <th>9.0</th>
      <td>13.606445</td>
      <td>3.587466</td>
      <td>29.712093</td>
      <td>29.855307</td>
      <td>13.715728</td>
      <td>22.189819</td>
      <td>8.924530</td>
    </tr>
    <tr>
      <th>10.0</th>
      <td>13.431428</td>
      <td>3.574971</td>
      <td>29.732651</td>
      <td>29.875928</td>
      <td>13.538896</td>
      <td>22.239883</td>
      <td>9.916120</td>
    </tr>
    <tr>
      <th>11.0</th>
      <td>13.264619</td>
      <td>3.563063</td>
      <td>29.752240</td>
      <td>29.895602</td>
      <td>13.370365</td>
      <td>22.287345</td>
      <td>10.907706</td>
    </tr>
    <tr>
      <th>12.0</th>
      <td>13.110621</td>
      <td>3.552074</td>
      <td>29.770323</td>
      <td>29.913761</td>
      <td>13.214778</td>
      <td>22.330927</td>
      <td>11.899286</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Finally, let’s compare the derived “conservative temperature” with the “pre-processed” and raw temperature variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">down_cast_df</span><span class="p">[</span><span class="s2">&quot;t090C&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot_cast</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Raw&quot;</span><span class="p">)</span>
<span class="n">proc</span><span class="p">[</span><span class="s2">&quot;t090C&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot_cast</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Processed&quot;</span><span class="p">)</span>
<span class="n">proc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;depth&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;CT&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Derived (&quot;conservative temperature&quot;)&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;lower right&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Temperature (°C)&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/1d33a038070a1a9eeb6e479cc4a0ee3094a04cdd921144a03b180c904a5c70c1.png" src="../_images/1d33a038070a1a9eeb6e479cc4a0ee3094a04cdd921144a03b180c904a5c70c1.png" />
</div>
</div>
</section>
</section>
<section id="data-from-the-orca-point-wells-depth-profiling-buoy-mooring">
<h2>Data from the ORCA Point Wells depth-profiling buoy (mooring)<a class="headerlink" href="#data-from-the-orca-point-wells-depth-profiling-buoy-mooring" title="Link to this heading">#</a></h2>
<p>Buoy (mooring) water temperature data was downloaded manually from NVS, specifically from <a class="reference external" href="https://nvs.nanoos.org/Explorer?action=oiw:fixed_platform:APL_NPB1PtWells:observations:H1_WaterTemp">https://nvs.nanoos.org/Explorer?action=oiw:fixed_platform:APL_NPB1PtWells:observations:H1_WaterTemp</a>. Buoy latitude and longitude were copied and pasted from the “Details” tab on that NVS pop-up window.</p>
<p>We’ll use the file <a class="reference download internal" download="" href="../_downloads/294e677345d01d4a1b246ec65ef99bb0/APL_NPB1PtWells-H1_WaterTemp.csv"><span class="xref download myst">data/ORCAmooring/APL_NPB1PtWells-H1_WaterTemp.csv</span></a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_lon</span><span class="p">,</span> <span class="n">buoy_lat</span> <span class="o">=</span> <span class="o">-</span><span class="mf">122.3972</span><span class="p">,</span> <span class="mf">47.7612</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_temp_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span>
    <span class="n">Path</span><span class="p">(</span><span class="s2">&quot;./data/ORCAmooring&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;APL_NPB1PtWells-H1_WaterTemp.csv&quot;</span><span class="p">,</span> 
    <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Date and Time&quot;</span><span class="p">],</span>
    <span class="c1"># The temperature column uses blank character as the no-data value</span>
    <span class="n">na_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39; &#39;</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 4408 entries, 0 to 4407
Data columns (total 3 columns):
 #   Column             Non-Null Count  Dtype                    
---  ------             --------------  -----                    
 0   Date and Time      4408 non-null   datetime64[ns, UTC-07:00]
 1    Depth (M)         4408 non-null   object                   
 2    Water Temp. (°C)  4260 non-null   float64                  
dtypes: datetime64[ns, UTC-07:00](1), float64(1), object(1)
memory usage: 103.4+ KB
</pre></div>
</div>
</div>
</div>
<p>Remove rows with missing (<code class="docutils literal notranslate"><span class="pre">NA</span></code>, “not available”) temperature, then rename columns to simpler, easier-to-use strings</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="s1">&#39; Water Temp. (°C)&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span>
    <span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Date and Time&#39;</span><span class="p">:</span> <span class="s1">&#39;date_time&#39;</span><span class="p">,</span>
             <span class="s1">&#39; Depth (M)&#39;</span><span class="p">:</span> <span class="s1">&#39;depth&#39;</span><span class="p">,</span>
             <span class="s1">&#39; Water Temp. (°C)&#39;</span><span class="p">:</span> <span class="s1">&#39;temp&#39;</span><span class="p">},</span>
    <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date_time</th>
      <th>depth</th>
      <th>temp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>4403</th>
      <td>2024-07-18 12:00:18-07:00</td>
      <td>-79 m</td>
      <td>11.332</td>
    </tr>
    <tr>
      <th>4404</th>
      <td>2024-07-18 12:00:18-07:00</td>
      <td>-7 m</td>
      <td>14.715</td>
    </tr>
    <tr>
      <th>4405</th>
      <td>2024-07-18 12:00:18-07:00</td>
      <td>-80 m</td>
      <td>11.329</td>
    </tr>
    <tr>
      <th>4406</th>
      <td>2024-07-18 12:00:18-07:00</td>
      <td>-8 m</td>
      <td>13.893</td>
    </tr>
    <tr>
      <th>4407</th>
      <td>2024-07-18 12:00:18-07:00</td>
      <td>-9 m</td>
      <td>13.054</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Convert depth column to a numeric, positive-down_cast_df float type. Depth values are strings that look like this: “ -79 m”, with one blank space before the number and the letter m (meters) after the number, but with a blank space separating them. We’ll convert to positive-down_cast_df values for consistency with the CTD data and to follow the usual convention for depth.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_temp_df</span><span class="p">[</span><span class="s1">&#39;depth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">buoy_temp_df</span><span class="p">[</span><span class="s1">&#39;depth&#39;</span><span class="p">]</span>
    <span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
    <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Sort on <code class="docutils literal notranslate"><span class="pre">date_time</span></code> and <code class="docutils literal notranslate"><span class="pre">depth</span></code>, to ensure the data are in a form that’s directly usable in the plots.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span>
    <span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date_time&#39;</span><span class="p">,</span> <span class="s1">&#39;depth&#39;</span><span class="p">],</span>
    <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">],</span>
    <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>date_time</th>
      <th>depth</th>
      <th>temp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>4400</th>
      <td>2024-07-18 12:00:18-07:00</td>
      <td>76.0</td>
      <td>11.336</td>
    </tr>
    <tr>
      <th>4401</th>
      <td>2024-07-18 12:00:18-07:00</td>
      <td>77.0</td>
      <td>11.337</td>
    </tr>
    <tr>
      <th>4402</th>
      <td>2024-07-18 12:00:18-07:00</td>
      <td>78.0</td>
      <td>11.335</td>
    </tr>
    <tr>
      <th>4403</th>
      <td>2024-07-18 12:00:18-07:00</td>
      <td>79.0</td>
      <td>11.332</td>
    </tr>
    <tr>
      <th>4405</th>
      <td>2024-07-18 12:00:18-07:00</td>
      <td>80.0</td>
      <td>11.329</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Index: 4260 entries, 50 to 4405
Data columns (total 3 columns):
 #   Column     Non-Null Count  Dtype                    
---  ------     --------------  -----                    
 0   date_time  4260 non-null   datetime64[ns, UTC-07:00]
 1   depth      4260 non-null   float64                  
 2   temp       4260 non-null   float64                  
dtypes: datetime64[ns, UTC-07:00](1), float64(2)
memory usage: 133.1 KB
</pre></div>
</div>
</div>
</div>
<p>List unique date time values and save them in <code class="docutils literal notranslate"><span class="pre">buoy_datetimes</span></code> for reuse.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_datetimes</span> <span class="o">=</span> <span class="n">buoy_temp_df</span><span class="p">[</span><span class="s1">&#39;date_time&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">buoy_datetimes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;DatetimeArray&gt;
[&#39;2024-06-21 10:15:14-07:00&#39;, &#39;2024-06-21 12:00:13-07:00&#39;,
 &#39;2024-06-22 00:00:14-07:00&#39;, &#39;2024-06-22 12:00:14-07:00&#39;,
 &#39;2024-06-23 00:00:14-07:00&#39;, &#39;2024-06-23 12:00:14-07:00&#39;,
 &#39;2024-06-24 00:00:14-07:00&#39;, &#39;2024-06-24 12:00:14-07:00&#39;,
 &#39;2024-06-25 00:00:14-07:00&#39;, &#39;2024-06-25 12:00:14-07:00&#39;,
 &#39;2024-06-26 00:00:15-07:00&#39;, &#39;2024-06-26 12:00:14-07:00&#39;,
 &#39;2024-06-27 00:00:14-07:00&#39;, &#39;2024-06-27 12:00:14-07:00&#39;,
 &#39;2024-06-28 00:00:15-07:00&#39;, &#39;2024-06-28 12:00:15-07:00&#39;,
 &#39;2024-06-29 00:00:15-07:00&#39;, &#39;2024-06-29 12:00:15-07:00&#39;,
 &#39;2024-06-30 00:00:15-07:00&#39;, &#39;2024-06-30 12:00:15-07:00&#39;,
 &#39;2024-07-01 00:00:14-07:00&#39;, &#39;2024-07-01 12:00:15-07:00&#39;,
 &#39;2024-07-02 00:00:15-07:00&#39;, &#39;2024-07-02 12:00:16-07:00&#39;,
 &#39;2024-07-03 00:00:16-07:00&#39;, &#39;2024-07-03 12:00:15-07:00&#39;,
 &#39;2024-07-04 00:00:15-07:00&#39;, &#39;2024-07-04 12:00:16-07:00&#39;,
 &#39;2024-07-05 00:00:15-07:00&#39;, &#39;2024-07-05 12:00:16-07:00&#39;,
 &#39;2024-07-06 00:00:15-07:00&#39;, &#39;2024-07-06 12:00:16-07:00&#39;,
 &#39;2024-07-07 00:00:16-07:00&#39;, &#39;2024-07-07 12:00:16-07:00&#39;,
 &#39;2024-07-08 00:00:16-07:00&#39;, &#39;2024-07-08 12:00:16-07:00&#39;,
 &#39;2024-07-09 00:00:17-07:00&#39;, &#39;2024-07-09 12:00:16-07:00&#39;,
 &#39;2024-07-10 00:00:17-07:00&#39;, &#39;2024-07-10 12:00:16-07:00&#39;,
 &#39;2024-07-11 00:00:17-07:00&#39;, &#39;2024-07-11 12:00:16-07:00&#39;,
 &#39;2024-07-12 00:00:17-07:00&#39;, &#39;2024-07-12 12:00:17-07:00&#39;,
 &#39;2024-07-13 00:00:17-07:00&#39;, &#39;2024-07-13 12:00:17-07:00&#39;,
 &#39;2024-07-14 00:00:17-07:00&#39;, &#39;2024-07-14 12:00:17-07:00&#39;,
 &#39;2024-07-15 00:00:16-07:00&#39;, &#39;2024-07-15 12:00:17-07:00&#39;,
 &#39;2024-07-16 00:00:17-07:00&#39;, &#39;2024-07-16 12:00:17-07:00&#39;,
 &#39;2024-07-17 00:00:17-07:00&#39;, &#39;2024-07-17 12:00:18-07:00&#39;,
 &#39;2024-07-18 00:00:17-07:00&#39;, &#39;2024-07-18 12:00:18-07:00&#39;]
Length: 56, dtype: datetime64[ns, UTC-07:00]
</pre></div>
</div>
</div>
</div>
<p>Let’s make a quick plot. Note that here we use the Pandas DataFrame <code class="docutils literal notranslate"><span class="pre">plot</span></code> function, which is based on <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>. We’ll plot the last available profile, accessible as <code class="docutils literal notranslate"><span class="pre">buoy_datetimes[-1]</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">(</span>
    <span class="n">buoy_temp_df</span><span class="p">[</span><span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">date_time</span> <span class="o">==</span> <span class="n">buoy_datetimes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s1">&#39;depth&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">invert_yaxis</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/d88d97e5da53f0e858b8ad8dea82edc156f8acd706820b5669eb9bdffa4d250a.png" src="../_images/d88d97e5da53f0e858b8ad8dea82edc156f8acd706820b5669eb9bdffa4d250a.png" />
</div>
</div>
<p>List unique <code class="docutils literal notranslate"><span class="pre">depth</span></code> values</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">depth</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([ 5.,  6.,  7.,  8.,  9., 10., 11., 12., 13., 14., 15., 16., 17.,
       18., 19., 20., 21., 22., 23., 24., 25., 26., 27., 28., 29., 30.,
       31., 32., 33., 34., 35., 36., 37., 38., 39., 40., 41., 42., 43.,
       44., 45., 46., 47., 48., 49., 50., 51., 52., 53., 54., 55., 56.,
       57., 58., 59., 60., 61., 62., 63., 64., 65., 66., 67., 68., 69.,
       70., 71., 72., 73., 74., 75., 76., 77., 78., 79., 80., 81.])
</pre></div>
</div>
</div>
</div>
<p>Plot a timeseries of temperature at three depths.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="p">(</span>
    <span class="c1"># depth closest to the surface</span>
    <span class="n">buoy_temp_df</span><span class="p">[</span><span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">depth</span> <span class="o">==</span> <span class="mi">5</span><span class="p">]</span>
    <span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;date_time&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;5 m&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="p">(</span>
    <span class="n">buoy_temp_df</span><span class="p">[</span><span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">depth</span> <span class="o">==</span> <span class="mi">40</span><span class="p">]</span>
    <span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;date_time&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;40 m&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="p">(</span>
    <span class="n">buoy_temp_df</span><span class="p">[</span><span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">depth</span> <span class="o">==</span> <span class="mi">80</span><span class="p">]</span>
    <span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;date_time&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;-o&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;80 m&#39;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Depth&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Temperature (C)&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/958dc3246e84294a3a3f8a6776dfd28ce2295148a91019b2017cea72a0d31c49.png" src="../_images/958dc3246e84294a3a3f8a6776dfd28ce2295148a91019b2017cea72a0d31c49.png" />
</div>
</div>
</section>
<section id="compare-buoy-and-cruise-data">
<h2>Compare buoy and cruise data<a class="headerlink" href="#compare-buoy-and-cruise-data" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="c1"># Cruise</span>
<span class="c1"># Subtract 7 hours from dcast_time to convert from UTC to local time</span>
<span class="n">proc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;depth&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;CT&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> 
          <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;cruise, processed - </span><span class="si">{</span><span class="n">dcast_time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span><span class="si">:</span><span class="s1">%h-%d %H:%M</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># Buoy</span>
<span class="p">(</span>
    <span class="c1"># Most recent buoy profile, in the downloaded file</span>
    <span class="n">buoy_temp_df</span><span class="p">[</span><span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">date_time</span> <span class="o">==</span> <span class="n">buoy_datetimes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;depth&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span>
          <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;buoy - </span><span class="si">{</span><span class="n">buoy_datetimes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s1">%h-%d %H:%M</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="p">)</span>
<span class="p">(</span>
    <span class="c1"># Second most recent buoy profile</span>
    <span class="n">buoy_temp_df</span><span class="p">[</span><span class="n">buoy_temp_df</span><span class="o">.</span><span class="n">date_time</span> <span class="o">==</span> <span class="n">buoy_datetimes</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]]</span>
    <span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;depth&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;temp&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;line&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span>
          <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;buoy - </span><span class="si">{</span><span class="n">buoy_datetimes</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span><span class="si">:</span><span class="s1">%h-%d %H:%M</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">invert_yaxis</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Depth (m)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Temperature (°C)&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/0b9d8764b43ee25c640a073674ea940f5c15a05ad34240262a29178d6526bcc8.png" src="../_images/0b9d8764b43ee25c640a073674ea940f5c15a05ad34240262a29178d6526bcc8.png" />
</div>
</div>
</section>
<section id="map-the-locations">
<h2>Map the locations<a class="headerlink" href="#map-the-locations" title="Link to this heading">#</a></h2>
<p>The <a class="reference external" href="https://python-visualization.github.io/folium/"><code class="docutils literal notranslate"><span class="pre">folium</span></code> package</a> provides a convenient tools for creating interactive maps.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">folium</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># for idx, row in nwis_sites_df.iterrows():</span>
<span class="c1">#     folium.Marker(location=[row[&#39;latitude&#39;], row[&#39;longitude&#39;]], </span>
<span class="c1">#                   icon=folium.Icon(color=&#39;blue&#39; if row[&#39;site_type&#39;] == &#39;ST&#39; else &#39;gray&#39;),</span>
<span class="c1">#                   popup=&quot;&lt;b&gt;{0}&lt;/b&gt; {1}. Site type: {2}. {3}&quot;.format(</span>
<span class="c1">#                       row[&#39;code&#39;], row[&#39;name&#39;], row[&#39;site_type&#39;], row[&#39;network&#39;])</span>
<span class="c1">#                  ).add_to(m)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">tiles</span><span class="o">=</span><span class="s1">&#39;ESRI.OceanBasemap&#39;</span><span class="p">)</span>
<span class="c1"># m = folium.Map()  # Use default OpenStreetMap tiles</span>

<span class="c1"># TODO: Add date &amp; time to the popup text</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
    <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">dcast_lat</span><span class="p">,</span> <span class="n">dcast_lon</span><span class="p">],</span>
    <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">),</span>
    <span class="n">popup</span><span class="o">=</span><span class="s2">&quot;cruise CTD&quot;</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
    <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">buoy_lat</span><span class="p">,</span> <span class="n">buoy_lon</span><span class="p">],</span>
    <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">),</span>
    <span class="n">popup</span><span class="o">=</span><span class="s2">&quot;Point Wells ORCA buoy&quot;</span>
<span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="c1"># Set the map extent (bounds) to the extent of the sites</span>
<span class="n">m</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">get_bounds</span><span class="p">())</span>

<span class="n">m</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    
    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
    
        &lt;script&gt;
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        &lt;/script&gt;
    
    &lt;style&gt;html, body {width: 100%;height: 100%;margin: 0;padding: 0;}&lt;/style&gt;
    &lt;style&gt;#map {position:absolute;top:0;bottom:0;right:0;left:0;}&lt;/style&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;
    
            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
            &lt;style&gt;
                #map_3a9e7164f03b318074a9e37b96964c59 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            &lt;/style&gt;
        
&lt;/head&gt;
&lt;body&gt;
    
    
            &lt;div class=&quot;folium-map&quot; id=&quot;map_3a9e7164f03b318074a9e37b96964c59&quot; &gt;&lt;/div&gt;
        
&lt;/body&gt;
&lt;script&gt;
    
    
            var map_3a9e7164f03b318074a9e37b96964c59 = L.map(
                &quot;map_3a9e7164f03b318074a9e37b96964c59&quot;,
                {
                    center: [0.0, 0.0],
                    crs: L.CRS.EPSG3857,
                    zoom: 1,
                    zoomControl: true,
                    preferCanvas: false,
                }
            );

            

        
    
            var tile_layer_c078f458f1a87e287ff876ab98dcde37 = L.tileLayer(
                &quot;https://server.arcgisonline.com/ArcGIS/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}&quot;,
                {&quot;attribution&quot;: &quot;Tiles \u0026copy; Esri \u0026mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri&quot;, &quot;detectRetina&quot;: false, &quot;maxNativeZoom&quot;: 13, &quot;maxZoom&quot;: 13, &quot;minZoom&quot;: 0, &quot;noWrap&quot;: false, &quot;opacity&quot;: 1, &quot;subdomains&quot;: &quot;abc&quot;, &quot;tms&quot;: false}
            );
        
    
            tile_layer_c078f458f1a87e287ff876ab98dcde37.addTo(map_3a9e7164f03b318074a9e37b96964c59);
        
    
            var marker_2b09d0d2521568d63ac4efbfe66b2e99 = L.marker(
                [47.71333333333333, -122.41933333333333],
                {}
            ).addTo(map_3a9e7164f03b318074a9e37b96964c59);
        
    
            var icon_a7a00e57825631094fcfb44396b75db8 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;red&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_2b09d0d2521568d63ac4efbfe66b2e99.setIcon(icon_a7a00e57825631094fcfb44396b75db8);
        
    
        var popup_c05cc9ca374dc4bddfbcf06a43d06b5c = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_118ea34f1353777fb1089156eb773ffb = $(`&lt;div id=&quot;html_118ea34f1353777fb1089156eb773ffb&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;cruise CTD&lt;/div&gt;`)[0];
                popup_c05cc9ca374dc4bddfbcf06a43d06b5c.setContent(html_118ea34f1353777fb1089156eb773ffb);
            
        

        marker_2b09d0d2521568d63ac4efbfe66b2e99.bindPopup(popup_c05cc9ca374dc4bddfbcf06a43d06b5c)
        ;

        
    
    
            var marker_3b35358d2c3cd45f9e6b3f0d07de0303 = L.marker(
                [47.7612, -122.3972],
                {}
            ).addTo(map_3a9e7164f03b318074a9e37b96964c59);
        
    
            var icon_600048a6427bd0c2f8232870da3e9010 = L.AwesomeMarkers.icon(
                {&quot;extraClasses&quot;: &quot;fa-rotate-0&quot;, &quot;icon&quot;: &quot;info-sign&quot;, &quot;iconColor&quot;: &quot;white&quot;, &quot;markerColor&quot;: &quot;blue&quot;, &quot;prefix&quot;: &quot;glyphicon&quot;}
            );
            marker_3b35358d2c3cd45f9e6b3f0d07de0303.setIcon(icon_600048a6427bd0c2f8232870da3e9010);
        
    
        var popup_c9752d2f4542c3354305dec36ccb4cd9 = L.popup({&quot;maxWidth&quot;: &quot;100%&quot;});

        
            
                var html_76bb96ced0fc334c0058e767cebd1124 = $(`&lt;div id=&quot;html_76bb96ced0fc334c0058e767cebd1124&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;Point Wells ORCA buoy&lt;/div&gt;`)[0];
                popup_c9752d2f4542c3354305dec36ccb4cd9.setContent(html_76bb96ced0fc334c0058e767cebd1124);
            
        

        marker_3b35358d2c3cd45f9e6b3f0d07de0303.bindPopup(popup_c9752d2f4542c3354305dec36ccb4cd9)
        ;

        
    
    
            map_3a9e7164f03b318074a9e37b96964c59.fitBounds(
                [[47.71333333333333, -122.41933333333333], [47.7612, -122.3972]],
                {}
            );
        
&lt;/script&gt;
&lt;/html&gt;" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div></div></div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-from-dino-sip-cruise">Data from DINO SIP Cruise</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#read-and-examine-the-cnv-export-file">Read and examine the <code class="docutils literal notranslate"><span class="pre">.cnv</span></code> export file</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pre-process-temperature-and-conductivity">Pre-process temperature and conductivity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#calculate-some-standard-derived-variables">Calculate some standard derived variables</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-from-the-orca-point-wells-depth-profiling-buoy-mooring">Data from the ORCA Point Wells depth-profiling buoy (mooring)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#compare-buoy-and-cruise-data">Compare buoy and cruise data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#map-the-locations">Map the locations</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Emilio Mayorga, Ethan Campbell
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>